<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Maps, Geocoding and Great Timing &mdash; jordanbrock.com </title>
    <link href="/css/reset.css" rel="stylesheet" type="text/css" />
    <link href="/css/screen.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/css/syntax.css" media="screen" rel="stylesheet" type="text/css" />
    <link rel="openid.server" href="http://openid.claimid.com/server">
    <link rel="openid.delegate" href="http://openid.claimid.com/jordanbrock">
    <script type="text/javascript" src="http://use.typekit.com/wmw7icf.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>

    <script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '4f8d0d2df5a1f54576000010');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>

  </head>
  <body>
    <div id="container">
      <header>
      <h1><a href="/">Jordan Brock</a></h1>
      </header>
      <div id="content">
        <h2>Maps, Geocoding and Great Timing</h2>
<time class="meta" datetime="2007-02-10">
  Feb 10, 2007
</time>
<article class="post">
  <p>On one of the sites I&#8217;ve been working on for quite a while (<a href="http://www.schoolseek.com.au">SchoolSeek</a>) we&#8217;ve been wanting to add the ability for users to find out how far a school is from their current location. There are services that have been able to <a href="http://en.wikipedia.org/wiki/Geocode">geocode</a> addresses for a while, but they were either based in the US, or cost money. Not a lot of money, but free is always good.</p>
<p>p. A couple of years ago, <a href="http://maps.google.com">Google Maps</a> launched in the US and opened up a massive range of possibilities for programmers to develop cool &#8220;mashups&#8221;, which took information from one site, mashed it together with maps from google, and created a whole new website. They were all really cool, but unfortunately (at least for the non-US based of us) it was nothing more than something we could sit back and watch &#8211; which was kind of weird because the team of developers that built Google Maps was based in Sydney.</p>
<p>p. But <a href="http://googleblog.blogspot.com/2006/05/on-map-down-under.html">finally</a> the Australian version of google maps was released, and then recently integrated with Local Search, which means you can search on Pizza shotps near a particular address. Which is cool.</p>
<p>p. What is even cooler (if you&#8217;re a ruby developer), though, is the release of this: <a href="http://geokit.rubyforge.org/">GeoKit</a>. It integrates with all of the major geocoding/mapping services and provides a huge range of options and services. So now you can do stuff like this:</p>
<pre>
add_1=GeoKit::Geocoders::GoogleGeocoder.geocode("1 St Georges Terrace, Perth, Western Australia")
add_2=GeoKit::Geocoders::GoogleGeocoder.geocode("1 York St, Albany, Western Australia")

distance = add_1.distance_from(add_2, :units =&gt; :kms)
</pre>
<p>p. Which returns</p>
<p>@<br />
389.248018478531<br />
@</p>
<p>p. which is, of course, how far it is between the main streets of Perth and Albany in Western Australia.</p>
<p>p. Sawwweeeeeet.</p>
<p>h3. Update</p>
<p>p. Well, that didn&#8217;t take long at all. A quick loop over the existing schools in the <a href="http://www.schoolseek.com.au">SchoolSeek</a> database got the lat/long information for all the addresses. Then adding this line</p>
<pre>acts_as_mappable default_units =&gt; :kms</pre>
<p>p. to my Address model allows you to do this</p>
<pre>
@addresses = Address.find(:all, :origin =&gt; "18 Bland St, Ashfield, New South Wales", :conditions =&gt; "distance &lt; 10")
</pre>
<p>p. which gives me all of the addresses within 10Kms of 18 Bland St, Ashfield. Nice.</p>
<p>p. So, basically GeoKit let me add distance searching to the site within about 45 minutes (allowing 25 minutes for me to read through the examples and such!)</p>
</article>

      </div>
      <div id="sidebar">
        <h2>Stuff</h2>
        <ul>
          <li><a href="/archive.html">Archive</a></li>
          <li><a href="http://photos.jordanbrock.com">OpenPhoto</a></li>
          <li><a href="http://twitter.com/jordanbrock">twitter</a></li>
          <li><a href="http://strava.com/athletes/jordanbrock">Strava</a></li>
        </ul>
      </div>
      <footer>
        By me.
      </footer>
    </div>
  </body>
</html>
